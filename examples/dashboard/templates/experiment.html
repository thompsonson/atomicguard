{% extends "base.html" %}

{% block title %}Experiment Grid — AtomicGuard{% endblock %}

{% block content %}
<header class="page-header">
    <h1>Experiment Grid</h1>
    <p class="subtitle">{{ grid_data | length }} instances across {{ arm_names | length }} arm(s)</p>
</header>

{% if grid_data %}
<div class="table-wrapper">
    <table class="grid-table">
        <thead>
            <tr>
                <th class="sticky-col">Instance</th>
                {% for arm in arm_names %}
                <th>{{ arm }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in grid_data %}
            <tr>
                <td class="sticky-col instance-cell" title="{{ row.instance_id }}">
                    {{ row.short_name }}
                </td>
                {% for arm in arm_names %}
                {% set cell = row.arms[arm] %}
                {% if cell %}
                <td class="status-cell">
                    <a href="/dag/{{ row.instance_id }}/{{ arm }}" class="status-badge badge-{{ cell.status }}">
                        {{ cell.status }}
                        <span class="artifact-count">{{ cell.artifact_count }}</span>
                    </a>
                </td>
                {% else %}
                <td class="status-cell">
                    <span class="status-badge badge-empty">—</span>
                </td>
                {% endif %}
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p class="empty-state">No instances found. Check --artifact-dir path.</p>
{% endif %}
{% endblock %}
