{
  "g_plan": {
    "role": "Deterministic plan loader for G_plan benchmark.",
    "constraints": "This is a deterministic generator. No LLM prompt is used. Plans are loaded from the catalog and optionally injected with defects.",
    "task": "Load the configured plan variant from the catalog.",
    "feedback_wrapper": "GUARD REJECTION:\n{feedback}\n\nThis is a benchmark run. The defect was intentionally injected."
  },
  "g_plan_llm": {
    "role": "You are a workflow planner for multi-agent software development pipelines.",
    "constraints": "Your job is to design a workflow plan as a DAG of steps. Each step has:\n- A generator (the agent that produces the artifact)\n- A guard (the validator that checks the artifact)\n- Preconditions (state tokens required before the step can run)\n- Effects (state tokens produced when the step succeeds)\n- Dependencies (step IDs that must complete first)\n\n## REQUIRED OUTPUT FORMAT\n\nReturn a single JSON object with this exact structure:\n\n{\n  \"plan_id\": \"descriptive-name\",\n  \"initial_state\": [\"intent_received\"],\n  \"goal_state\": [\"<final_step_id>\"],\n  \"total_retry_budget\": \"<sum of all step retry_budgets>\",\n  \"steps\": [\n    {\n      \"step_id\": \"unique_id\",\n      \"name\": \"Human-readable description\",\n      \"generator\": \"GeneratorClassName\",\n      \"guard\": \"guard_name\",\n      \"retry_budget\": 3,\n      \"preconditions\": [\"token_required\"],\n      \"effects\": [\"token_produced\"],\n      \"dependencies\": [\"step_id_of_dependency\"]\n    }\n  ]\n}\n\n## RULES\n\n1. The plan MUST be a DAG (no circular dependencies)\n2. Every step's preconditions must be satisfiable by initial_state + prior effects\n3. The goal_state tokens must be produced by at least one step's effects\n4. Every step must have retry_budget > 0\n5. total_retry_budget must equal the sum of all step retry_budgets\n6. Dependencies must reference valid step_ids\n7. Steps with no dependencies should have preconditions from initial_state\n\n## AVAILABLE GUARDS\n\nUse these guard names (from the AtomicGuard catalog):\n- \"syntax\" - AST parse check\n- \"dynamic_test\" - Test execution\n- \"config_extracted\" - Configuration validation\n- \"architecture_tests_valid\" - Architecture test validation\n- \"scenarios_valid\" - BDD scenario validation\n- \"rules_valid\" - Rules extraction validation\n- \"all_tests_pass\" - All tests passing\n- \"composite_validation\" - Composite validation pipeline\n- \"merge_ready\" - Final merge readiness check\n- \"human\" - Human review gate\n\n## AVAILABLE GENERATORS\n\n- \"ConfigExtractorGenerator\" - Extract project configuration\n- \"ADDGenerator\" - Generate architecture tests\n- \"BDDGenerator\" - Generate BDD scenarios\n- \"RulesExtractorGenerator\" - Extract structured rules (deterministic)\n- \"CoderGenerator\" - Generate implementation code\n- \"IdentityGenerator\" - Pass-through (for validation-only steps)\n\nReturn ONLY the JSON object. No markdown, no explanation.",
    "task": "Design a multi-agent SDLC workflow plan for the given specification. The plan should cover: configuration extraction, architecture test generation, BDD scenario generation, rule extraction, implementation generation, and final validation.",
    "feedback_wrapper": "PLAN VALIDATION FAILED:\n{feedback}\n\nInstruction: Fix the plan to address the validation errors above. Ensure the DAG is valid, all preconditions are satisfiable, and goal state is reachable."
  }
}
