{
  "name": "S1 Decomposed",
  "description": "Decomposed workflow with stateless action pairs and targeted escalation routing. Each action pair receives its full context as input and produces an immutable artifact, so while the workflow definition contains escalation cycles, every execution unfolds as a DAG of (context, response, guard-result) tuples. The workflow engine maintains state by injecting the appropriate upstream artifacts into each invocation. Addresses failure modes observed in backtracking experiments by routing specific error types to the appropriate upstream steps.",
  "rmax": 8,
  "action_pairs": {
    "ap_classify": {
      "generator": "ClassificationGenerator",
      "guard": "classification_schema",
      "description": "Classify bug type (logic, syntax, missing_check, etc.)"
    },
    "ap_structure": {
      "generator": "StructureGenerator",
      "guard": "structure",
      "description": "Analyze project structure, imports, dependencies"
    },
    "ap_root_cause": {
      "generator": "RootCauseGenerator",
      "guard": "root_cause",
      "requires": ["ap_classify"],
      "description": "Identify root cause based on classification"
    },
    "ap_localise_issue": {
      "generator": "LocalizationGenerator",
      "guard": "localization",
      "requires": ["ap_root_cause"],
      "r_patience": 2,
      "e_max": 2,
      "escalate_feedback_to": ["ap_root_cause"],
      "description": "Locate exact files/functions containing the bug"
    },
    "ap_context_read": {
      "generator": "ContextReadGenerator",
      "guard": "context",
      "requires": ["ap_localise_issue"],
      "r_patience": 2,
      "e_max": 2,
      "escalate_feedback_to": ["ap_localise_issue"],
      "description": "Read and summarize relevant code context"
    },
    "ap_localise_tests": {
      "generator": "TestLocalizationGenerator",
      "guard": "test_localization",
      "guard_config": {
        "repo_root": "{repo_root}"
      },
      "requires": ["ap_localise_issue", "ap_structure"],
      "r_patience": 2,
      "e_max": 2,
      "escalate_feedback_to": ["ap_localise_issue", "ap_structure"],
      "description": "Locate existing test files and patterns"
    },
    "ap_fix_approach": {
      "generator": "FixApproachGenerator",
      "guard": "fix_approach",
      "requires": ["ap_root_cause", "ap_context_read", "ap_localise_issue", "ap_structure"],
      "r_patience": 2,
      "e_max": 2,
      "escalate_feedback_to": ["ap_context_read"],
      "description": "Design the fix strategy"
    },
    "ap_impact_analysis": {
      "generator": "ImpactAnalysisGenerator",
      "guard": "impact",
      "requires": ["ap_fix_approach"],
      "r_patience": 2,
      "e_max": 1,
      "escalate_feedback_to": ["ap_fix_approach"],
      "description": "Analyze impact on other code and tests"
    },
    "ap_gen_test": {
      "generator": "TestGenerator",
      "guard": "composite",
      "guards": ["test_syntax", "test_red"],
      "requires": ["ap_fix_approach", "ap_localise_tests", "ap_impact_analysis"],
      "r_patience": 2,
      "e_max": 2,
      "escalate_feedback_to": ["ap_fix_approach"],
      "escalate_feedback_by_guard": {
        "TestSyntaxGuard": ["ap_localise_tests"],
        "TestRedGuard": ["ap_fix_approach", "ap_root_cause"]
      },
      "description": "Generate failing test (TDD red phase)"
    },
    "ap_edit_plan": {
      "generator": "EditPlanGenerator",
      "guard": "edit_plan",
      "guard_config": {
        "repo_root": "{repo_root}"
      },
      "requires": ["ap_fix_approach", "ap_context_read"],
      "r_patience": 2,
      "e_max": 2,
      "escalate_feedback_to": ["ap_fix_approach"],
      "description": "Plan exact file edits before patch generation"
    },
    "ap_gen_patch": {
      "generator": "PatchGenerator",
      "guard": "composite",
      "guards": ["patch", "lint"],
      "guard_config": {
        "require_git_apply": true,
        "require_syntax_valid": true
      },
      "requires": ["ap_edit_plan", "ap_gen_test", "ap_context_read"],
      "r_patience": 3,
      "e_max": 2,
      "escalate_feedback_to": ["ap_edit_plan"],
      "escalate_feedback_by_guard": {
        "PatchGuard": ["ap_edit_plan"],
        "LintGuard": ["ap_edit_plan"]
      },
      "description": "Generate patch (TDD green phase)"
    },
    "ap_integrate_patch": {
      "generator": "PatchGenerator",
      "guard": "composite",
      "guards": ["test_green", "full_eval"],
      "requires": ["ap_gen_patch", "ap_structure", "ap_fix_approach", "ap_gen_test"],
      "r_patience": 2,
      "e_max": 2,
      "escalate_feedback_to": ["ap_gen_patch"],
      "escalate_feedback_by_guard": {
        "TestGreenGuard": ["ap_gen_patch", "ap_edit_plan"],
        "FullEvalGuard": ["ap_impact_analysis", "ap_gen_patch"]
      },
      "description": "Integrate and verify patch passes full eval"
    }
  }
}
