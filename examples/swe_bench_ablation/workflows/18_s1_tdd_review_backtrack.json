{
  "name": "S1 TDD + Diff Review + Selective Backtracking",
  "description": "Arm 18: TDD with execution verification + LLM-as-reviewer + BacktrackOrchestrator. When ap_diff_review identifies failure origin via backtrack_target, the orchestrator backtracks to the indicated step with review reasoning as amended context.",
  "model": "moonshotai/kimi-k2-0905",
  "provider": "openrouter",
  "rmax": 6,
  "backtrack_config": {
    "mode": "llm_review",
    "backtrack_budget": {
      "ap_analysis": 1,
      "ap_gen_test": 2,
      "ap_gen_patch": 0
    }
  },
  "action_pairs": {
    "ap_analysis": {
      "generator": "AnalysisGenerator",
      "guard": "analysis",
      "guard_config": {},
      "description": "Analyze the bug: classify type, identify root cause, list affected files"
    },
    "ap_gen_test": {
      "generator": "TestGenerator",
      "guard": "composite",
      "guards": ["test_syntax", "test_red"],
      "guard_config": {},
      "requires": ["ap_analysis"],
      "description": "Write a failing test that reproduces the bug (verified via Docker execution)"
    },
    "ap_gen_patch": {
      "generator": "PatchGenerator",
      "guard": "composite",
      "guards": ["patch", "test_green", "full_eval"],
      "guard_config": {
        "require_git_apply": true,
        "require_syntax_valid": true
      },
      "requires": ["ap_analysis", "ap_gen_test"],
      "description": "Generate patch that fixes the bug, passes generated test, and passes full eval"
    },
    "ap_diff_review": {
      "generator": "DiffReviewGenerator",
      "guard": "review_schema",
      "guard_config": {},
      "requires": ["ap_analysis", "ap_gen_test", "ap_gen_patch"],
      "description": "LLM-as-reviewer: critique the patch and provide backtrack_target heuristic for selective backtracking"
    }
  }
}
